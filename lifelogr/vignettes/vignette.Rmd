---
title: "Introduction to lifelogr"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, echo = FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>")
```

```{r}
library(lifelogr) # doesn't work yet
```


[Lifelogging][http://lifestreamblog.com/lifelogging/] is the "process of 
tracking personal data generated by our own behavioral activities."  Examples of
lifelogging include tracking one's exercise and sleep.  While devices like 
iPhones and fitbits make collecting data on oneself easy, interpreting that data
is more difficult.

The lifelogr package makes life logging easy by:

- Creating three sets of visualizations
- Creating an experimentation framework

This package was designed to work with fitbit data, but users can also
provide their own data.  However, except for Apple data, the data types must
match that provided here for lifelogr's functions to work.

## Data

Fitbit users can provide their username and password.  Fitbit allows login via
Facebook and Google, but this library only works with fitbit login.
```{r, eval = FALSE}
EX <- Person$new(fitbit_user_email = "example@domain.com", 
                 fitbit_user_pw = "password",
                 apple_data_file = "apple.csv",
                 addl_data = NA,
                 user_info = list("name" = "EX", "age" = 29, "gender" = "male"),
                 target_steps = 10000,
                 group_assignments = list(data.frame(NA), data.frame(NA)),
                 start_date = "2017-01-19", end_date = "2017-02-17")
```

```{r}
load("../data/EX.rda")
# data(EX)
```


iPhone users can provide their Apple data as a csv.  There is an iOS app called 
QS Access (quantified self) where you can select which measures you would like
and on which time scale (by day or by hour), and it will create a csv file for
you.  For greater compatibility with the lifelogr package, users are highly 
recommended to select the "by hour" time interval.

Users can provide other sources of data as a data frame, as an argument to 
`addl_data` or `addl_data2`.

EX is an instance of the Person class, which has 3 main public data frames:
`fitbit_daily`, `fitbit_intraday`, and `util`.

Here is the structure of `fitbit_daily`, which has fitbit data recorded on a
daily basis.
```{r}
dplyr::glimpse(EX$fitbit_daily)
```

Here is the structure of `fitbit_intraday`, which has fitbit data recorded on an
intraday basis, generally every 15 minutes, although for certain variables, such
as heart rate, every 5 minutes.
```{r}
dplyr::glimpse(EX$fitbit_intraday)
```


Here is the structure of `fitbit_util`, which has information about the dates
in the range specified by the user when creating the Person instantiation, such
as day of week and month.
```{r}
dplyr::glimpse(EX$util)
```

## Visualization

There are 3 functions which allow for a series of plots with just one function
call: `plot_sleep_all(Person)`, `plot_daily_all(Person)`, and 
`plot_intraday_all(Person)`.  Each acts like the `plot.lm()` function, where
users must click "enter" to see the next plot.

Each plot within the generic plot function can also be called individually.

Here are the sleep plots for EX:
```{r, fig.width = 6, fig.height = 3}
plot_sleep_all(EX)
```

Users can also call each function individually using 
`plot_sleep(Person, plot_type)`.
For example:
```{r}
plot_sleep(EX, "by_datetime")
```


Some plots have other options.

For example, `plot_sleep_start_end` has a `color_var = "day_of_week"` argument 
to color the lines by day of the week instead of weekend/weekday.
```{r, fig.width = 6, fig.height = 3}
plot_sleep_start_end(EX, "day_of_week")
```


```{r, fig.width = 6, fig.height = 3}
plot_daily_all(EX)
```


```{r, fig.width = 6, fig.height = 3}
plot_intraday_all(EX)
```

## Figures

The figure sizes have been customised so that you can easily put two images side-by-side. 

```{r, fig.show='hold'}
plot(1:10)
plot(10:1)
```

You can enable figure captions by `fig_caption: yes` in YAML:

    output:
      rmarkdown::html_vignette:
        fig_caption: yes

Then you can use the chunk option `fig.cap = "Your figure caption."` in **knitr**.

## More Examples

```{r, echo=FALSE, results='asis'}
knitr::kable(head(mtcars, 10))
```

Also a quote using `>`:

> "He who gives up [code] safety for [code] speed deserves neither."
([via](https://twitter.com/hadleywickham/status/504368538874703872))
